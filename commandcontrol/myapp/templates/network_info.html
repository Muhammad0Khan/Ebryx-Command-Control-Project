{% extends 'dashboard_base.html' %} {% block content %} {% load static %}

<div class="mt-4">
    <div class="">
        <h1>Terminal</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="{% url 'dashboard' %}">Dashboard</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="#">Terminal</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="#">{{ token }}</a>
                </li>
            </ol>
        </nav>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="row mb-3"></div>
            <div class="row mb-3">
                <label class="col-sm-2 col-form-label">Command Line</label>
                <div class="col-sm-10">
                    <form id="InputForm" method="post">
                        {% csrf_token %}
                        <textarea
                            class="form-control"
                            id="na"
                            name="na"
                            placeholder=""
                            style="height: 200px; background-color: #131111; color: #2eca6a;"
                            readonly
                        ></textarea>
                        <input
                            type="text"
                            class="form-control"
                            id="inputField"
                            name="inputField"
                            placeholder="Single Command Only"
                            style="background-color: black; color: #2eca6a;"
                        />
                        <button type="submit" class="btn btn-primary mt-3">Execute</button>
                    </form>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-sm-12">
                    <h2>Command Responses</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Command</th>
                                <th>Response</th>
                                <th>Executed</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for index, command_data in commands.items %}
                            {% if command_data %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ command_data.command }}</td>
                                <td>{{ command_data.response }}</td>
                                <td>{{ command_data.executed }}</td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById("InputForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent default form submission
        this.submit(); // Submit the form
    });
</script>

{% endblock %}
